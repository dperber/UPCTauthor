// automatically generated by Xtext
grammar org.xtext.Upctforma with org.eclipse.xtext.common.Terminals

import "platform:/resource/upctforma/model/upctforma.ecore" 
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

Definition returns Definition:
	{Definition}
	'Definition'
	name=EString
	'{'
		('package' name = QualifiedName ';')?
		(imports+=Import ( "," imports+=Import)* )?
		('templates' '{' templates+=TemplateDef ( "," templates+=TemplateDef)* '}' )?
		('widgets' '{' widgets+=WidgetDef ( "," widgets+=WidgetDef)* '}' )?
		('types' '{' types+=Type ( "," types+=Type)* '}' )?
		(unit=Unit )?
	'}';

QualifiedName: ID ('.' ID)* ;

Import:
	'import' importedNamespace=QualifiedNameWithWildcard ';' ;

QualifiedNameWithWildcard: QualifiedName '.*'? ;

Type returns Type:
	Type_Impl | SimpleType | DataType;
	
Element returns Element:
	Element_Impl | Column | Image | Widget | Text | Composite_Impl | Video | Simple_Impl | Parameter | Row;

Simple returns Simple:
	Simple_Impl | Image | Text | Video;



EString returns ecore::EString:
	STRING | ID;

TemplateDef returns TemplateDef:
	{TemplateDef}
	'TemplateDef'
	name=EString
	'{'
		(rows+=Row ( "," rows+=Row)*  )?
	'}';

WidgetDef returns WidgetDef:
	{WidgetDef}
	'WidgetDef'
	name=EString
	'{'
		(parameters+=Parameter ( "," parameters+=Parameter)* )?
	'}';

Unit returns Unit:
	'Unit'
	name=EString
	'{'
		sections+=Section ( "," sections+=Section)*  
	'}';

Column returns Column:
	{Column}
	'column'
	'{'
		('width' width=EString)?
		(elements+=Element ( "," elements+=Element)* )?
	'}';

Element_Impl returns Element:
	{Element}
	'Element'
	;

Image returns Image:
	{Image}
	'Image'
	'{'
		('url' url=EString)?
	'}';

Widget returns Widget:
	'Widget'
	'{'
		'typewidget' typewidget=[WidgetDef|EString]
		(arguments+=Simple ( "," arguments+=Simple)* )?
	'}';

Text returns Text:
	'Text'
	'{'
		paragraphs+=Paragraph ( "," paragraphs+=Paragraph)*  
	'}';

Composite_Impl returns Composite:
	{Composite}
	'Composite'
	;

Video returns Video:
	{Video}
	'Video'
	'{'
		('url' url=EString)?
	'}';

Simple_Impl returns Simple:
	{Simple}
	'Simple'
	;

Parameter returns Parameter:
	{Parameter}
	'Parameter'
	'{'
		('type' type=[Type|EString])?
	'}';

Row returns Row:
	{Row}
	'row'
	'{'
		(columns+=Column ( "," columns+=Column)* )?
		('usetemplate' usetemplate=UseTemplate)? 
	'}';

UseTemplate returns UseTemplate:
	{UseTemplate}
	(typetemplate=[TemplateDef|EString])? 
	('{' arguments+=Argument ( "," arguments+=Argument)* )? '}'
;
	
Paragraph returns Paragraph:
	{Paragraph}
	('p' text=EString)?
;

enum TypeSimpleElement returns TypeSimpleElement:
				Text = 'Text' | Image = 'Image' | Video = 'Video' | Undefined = 'Undefined'; 

Section returns Section:
	{Section}
	'Section'
	name=EString
	'{'
		('image' image=EString)?
		('title' title=EString)?
		(rows+=Row ( "," rows+=Row)* )?
	'}';


Argument returns Argument:
	Argument_Impl | Image | Text | Video | Simple_Impl | Tab | Animation | DragAndDrop;


Argument_Impl returns Argument:
	{Argument}
	'Argument'
	;

Tab returns Tab:
	{Tab}
	'Tab'
	'{'
		(argument+=Simple ( "," argument+=Simple)* )?
	'}';
	
Animation returns Animation:
	{Animation}
	'Animation'
	'{'
		('width' width=EString)?
		(argument+=Simple ( "," argument+=Simple)* )?
	'}';
	
DragAndDrop returns DragAndDrop:
	{DragAndDrop}
	'DragAndDrop'
	'{'
		(argument+=Simple ( "," argument+=Simple)* )?
	'}';
	
Type_Impl returns Type:
	{Type}
	'Type'
	name=EString;

SimpleType returns SimpleType:
	{SimpleType}
	'SimpleType'
	name=EString
	'{'
		('type' type=TypeSimpleElement)?
	'}';

DataType returns DataType:
	{DataType}
	'DataType'
	name=EString
	'{'
		('type' '{' type+=SimpleType ( "," type+=SimpleType)* '}' )?
	'}';