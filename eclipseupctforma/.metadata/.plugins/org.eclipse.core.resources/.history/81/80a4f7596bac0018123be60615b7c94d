// automatically generated by Xtext
grammar org.xtext.Upctformagami with org.eclipse.xtext.common.Terminals

import "platform:/resource/upctformaevalua/model/upctformaevalua.ecore" as upctformaevalua
import "platform:/resource/upctforma/model/upctforma.ecore" as upctforma
import "http://www.eclipse.org/emf/2002/Ecore" as ecore
import "platform:/resource/upctformagami/model/upctformagami.ecore"



Gamification returns Gamification:
	{Gamification}
	'Gamification'
	'{'
		('import' imports+=Import ( "," imports+=Import)* ';' )?
		('badges' '{' badges+=Badge ( "," badges+=Badge)* '}' )?
		(widgets+=WidgetGamify ( "," widgets+=WidgetGamify)* )?
		(units+=UnitGamify ( "," units+=UnitGamify)* )?
	'}';

QualifiedName: ID ('.' ID)* ;

Import returns Import:
	{Import}
	
	importedNamespace=QualifiedNameWithWildcard  ;

QualifiedNameWithWildcard: QualifiedName '.*'? ;

EvaluationUnit returns upctformaevalua::EvaluationUnit:
	EvaluationUnit_Impl | Training | Final;



Type returns upctforma::Type:
	Type_Impl | SimpleType | RecordType | WidgetType | ListType | CompositeType_Impl;




ContentElement returns upctforma::ContentElement:
	ContentElement_Impl | Column | Image | Widget | Text | Composite_Impl | Video | SimpleElement_Impl | PlaceHolder | Row | Game | RecordValue | ListValue;





Question returns upctformaevalua::Question:
	Question_Impl | UniqueAnswer | MultipleAnswer | FillingAnswer | TrueOrFalse;




WidgetGamify returns WidgetGamify:
	{WidgetGamify}
	'WidgetGamify'
	'{'
		('widget' widgetref+=[upctforma::WidgetType|EString] ( "," widgetref+=[upctforma::WidgetType|EString])* )?
		('unit' unitref+=[upctforma::Unit|EString] ( "," unitref+=[upctforma::Unit|EString])* )?
		(pointswidgetdef+=PointAchievement ( "," pointswidgetdef+=PointAchievement)* )?
	'}';

Badge returns Badge:
	{Badge}
	'Badge'
	name=EString
	'{'
		('description' description=EString)?
		('url' url=EString)?
	'}';

UnitGamify returns UnitGamify:
	{UnitGamify}
	'UnitGamify'
	'{'
		('state' state=TypeState)?
		('contentunit' unitref=[upctforma::Unit|EString])?
		('evaluationunit' evalref=[upctformaevalua::EvaluationUnit|EString])?
		('URL' URL=EString)?
		('image' image=EString)?
		(defbadges+=UnitBadge ( "," defbadges+=UnitBadge)* )?
		(pointsunit+=PointAchievement ( "," pointsunit+=PointAchievement)* )?
		('nextmissions' '{' missions+=Mission ( "," missions+=Mission)* '}' )?
		
	'}';

EString returns ecore::EString:
	STRING | ID;

PointAchievement returns PointAchievement:
	{PointAchievement}
	'PointAchievement'
	'{'
		('type' type=TypeRule)?
		('points' points=EInt)?
		('attempt' attempt=EInt)?
		('pointrange' '{' pointrange+=ScoreRange ( "," pointrange+=ScoreRange)* '}' )?
	'}';

ScoreRange returns ScoreRange:
	{ScoreRange}
	'ScoreRange'
	'{'
		('InitialScore' InitialScore=EDouble)?
		('FinalScore' FinalScore=EDouble)?
	'}';

UnitBadge returns UnitBadge:
	{UnitBadge}
	'UnitBadge'
	'{'
		('type' type=TypeRule)?
		('badge' badge=[Badge|EString])?
	'}';

Mission returns Mission:
	{Mission}
	'Mission'
	'{'
		('type' type=TypeMissions)?
		('nextunit' nextunit=[upctforma::Unit|EString])?
		('nexteval' nexteval=[upctformaevalua::EvaluationUnit|EString])?
		('missionrange' '{' missionrange+=ScoreRange ( "," missionrange+=ScoreRange)* '}' )?
	'}';
	
Unit returns upctforma::Unit:
	'Unit'
	name=EString
	'{'
		('author' author=EString)?
		'sections' '{' sections+=Section ( "," sections+=Section)* '}' 
	'}';

WidgetType returns upctforma::WidgetType:
	'WidgetType'
	name=EString
	'{'
		'widgettypeelements' '(' widgettypeelements+=[upctforma::Type|EString] ( "," widgettypeelements+=[upctforma::Type|EString])* ')' 
	'}';

enum TypeRule returns TypeRule:
				completed = 'completed' | loginDaily = 'loginDaily' | scores = 'scores';

EInt returns ecore::EInt:
	'-'? INT;

EDouble returns ecore::EDouble:
	'-'? INT? '.' INT (('E'|'e') '-'? INT)?;

Section returns upctforma::Section:
	{upctforma::Section}
	'Section'
	name=EString
	'{'
		('image' image=EString)?
		('title' title=EString)?
		('rows' '{' rows+=Row ( "," rows+=Row)* '}' )?
	'}';

Row returns upctforma::Row:
	{upctforma::Row}
	'Row'
	'{'
		('columns' '{' columns+=Column ( "," columns+=Column)* '}' )?
		('usetemplate' usetemplate=UseTemplate)?
	'}';

Column returns upctforma::Column:
	{upctforma::Column}
	'Column'
	'{'
		('width' width=EString)?
		('elements' '{' elements+=ContentElement ( "," elements+=ContentElement)* '}' )?
	'}';

UseTemplate returns upctforma::UseTemplate:
	{upctforma::UseTemplate}
	'UseTemplate'
	'{'
		('typetemplate' typetemplate=[upctforma::TemplateDef|EString])?
		('templateelements' '{' templateelements+=ContentElement ( "," templateelements+=ContentElement)* '}' )?
	'}';

ContentElement_Impl returns upctforma::ContentElement:
	{upctforma::ContentElement}
	'ContentElement'
	;

Image returns upctforma::Image:
	{upctforma::Image}
	'Image'
	'{'
		('url' url=EString)?
	'}';

Widget returns upctforma::Widget:
	'Widget'
	name=EString
	'{'
		'widgettype' widgettype=[upctforma::WidgetType|EString]
		('widgetelements' '{' widgetelements+=ContentElement ( "," widgetelements+=ContentElement)* '}' )?
	'}';

Text returns upctforma::Text:
	'Text'
	'{'
		'paragraphs' '{' paragraphs+=Paragraph ( "," paragraphs+=Paragraph)* '}' 
	'}';

Composite_Impl returns upctforma::Composite:
	{upctforma::Composite}
	'Composite'
	;

Video returns upctforma::Video:
	{upctforma::Video}
	'Video'
	'{'
		('id' id=EString)?
	'}';

SimpleElement_Impl returns upctforma::SimpleElement:
	{upctforma::SimpleElement}
	'SimpleElement'
	;

PlaceHolder returns upctforma::PlaceHolder:
	'PlaceHolder'
	'{'
		'type' type=[upctforma::Type|EString]
	'}';

Game returns upctforma::Game:
	{upctforma::Game}
	'Game'
	'{'
		('id' id=EString)?
	'}';

RecordValue returns upctforma::RecordValue:
	'RecordValue'
	'{'
		'recordvalues' '{' recordvalues+=FieldValue ( "," recordvalues+=FieldValue)* '}' 
	'}';

ListValue returns upctforma::ListValue:
	'ListValue'
	'{'
		'listvalues' '{' listvalues+=ContentElement ( "," listvalues+=ContentElement)* '}' 
	'}';

Paragraph returns upctforma::Paragraph:
	{upctforma::Paragraph}
	'Paragraph'
	'{'
		('text' text=EString)?
	'}';

Type_Impl returns upctforma::Type:
	{upctforma::Type}
	'Type'
	name=EString;

SimpleType returns upctforma::SimpleType:
	{upctforma::SimpleType}
	'SimpleType'
	name=EString;

RecordType returns upctforma::RecordType:
	'RecordType'
	name=EString
	'{'
		'recordtype' '{' recordtype+=Field ( "," recordtype+=Field)* '}' 
	'}';

ListType returns upctforma::ListType:
	'ListType'
	name=EString
	'{'
		'listtype' listtype=[upctforma::Type|EString]
	'}';

CompositeType_Impl returns upctforma::CompositeType:
	{upctforma::CompositeType}
	'CompositeType'
	name=EString;

Field returns upctforma::Field:
	'Field'
	name=EString
	'{'
		'fieldtype' fieldtype=[upctforma::Type|EString]
	'}';

FieldValue returns upctforma::FieldValue:
	'FieldValue'
	name=EString
	'{'
		'fieldvalue' fieldvalue=ContentElement
	'}';

TemplateDef returns upctforma::TemplateDef:
	{upctforma::TemplateDef}
	'TemplateDef'
	name=EString
	'{'
		('rows' '{' rows+=Row ( "," rows+=Row)* '}' )?
	'}';


enum TypeState returns TypeState:
				open = 'open' | close = 'close';

EvaluationUnit_Impl returns upctformaevalua::EvaluationUnit:
	{upctformaevalua::EvaluationUnit}
	'EvaluationUnit'
	name=EString
	'{'
		('numberquestions' numberquestions=EInt)?
		('questions' '{' questions+=Question ( "," questions+=Question)* '}' )?
	'}';

enum TypeMissions returns TypeMissions:
				strong = 'strong' | weak = 'weak' | inhibitor = 'inhibitor' | scores = 'scores';

Question_Impl returns upctformaevalua::Question:
	{upctformaevalua::Question}
	'Question'
	'{'
		('correctfeedback' correctfeedback=EString)?
		('incorrectfeedback' incorrectfeedback=EString)?
	'}';

Training returns upctformaevalua::Training:
	{upctformaevalua::Training}
	'Training'
	name=EString
	'{'
		('numberquestions' numberquestions=EInt)?
		('Attempts' Attempts=EInt)?
		('grade' grade=TypeGrade)?
		('questions' '{' questions+=Question ( "," questions+=Question)* '}' )?
	'}';

Final returns upctformaevalua::Final:
	{upctformaevalua::Final}
	'Final'
	name=EString
	'{'
		('numberquestions' numberquestions=EInt)?
		('questions' '{' questions+=Question ( "," questions+=Question)* '}' )?
	'}';

UniqueAnswer returns upctformaevalua::UniqueAnswer:
	'UniqueAnswer'
	'{'
		('correctfeedback' correctfeedback=EString)?
		('incorrectfeedback' incorrectfeedback=EString)?
		('correctanswer' correctanswer=EInt)?
		'statements' statements=Paragraph0
		('answers' '{' answers+=Unique ( "," answers+=Unique)* '}' )?
	'}';

MultipleAnswer returns upctformaevalua::MultipleAnswer:
	'MultipleAnswer'
	'{'
		('correctfeedback' correctfeedback=EString)?
		('incorrectfeedback' incorrectfeedback=EString)?
		'statements' statements=Paragraph0
		('answers' '{' answers+=Multiple ( "," answers+=Multiple)* '}' )?
	'}';

FillingAnswer returns upctformaevalua::FillingAnswer:
	{upctformaevalua::FillingAnswer}
	'FillingAnswer'
	'{'
		('correctfeedback' correctfeedback=EString)?
		('incorrectfeedback' incorrectfeedback=EString)?
		('holes' '{' holes+=Hole ( "," holes+=Hole)* '}' )?
	'}';

TrueOrFalse returns upctformaevalua::TrueOrFalse:
	{upctformaevalua::TrueOrFalse}
	'TrueOrFalse'
	'{'
		('correctfeedback' correctfeedback=EString)?
		('incorrectfeedback' incorrectfeedback=EString)?
		('assertions' '{' assertions+=Assertion ( "," assertions+=Assertion)* '}' )?
	'}';

Paragraph0 returns upctformaevalua::Paragraph:
	{upctformaevalua::Paragraph}
	'Paragraph'
	'{'
		('text' text=EString)?
	'}';

Unique returns upctformaevalua::Unique:
	{upctformaevalua::Unique}
	'Unique'
	'{'
		('text' text=EString)?
	'}';

Multiple returns upctformaevalua::Multiple:
	{upctformaevalua::Multiple}
	(value?='value')?
	'Multiple'
	'{'
		('text' text=EString)?
	'}';

EBoolean returns ecore::EBoolean:
	'true' | 'false';

Hole returns upctformaevalua::Hole:
	{upctformaevalua::Hole}
	'Hole'
	'{'
		('text' text=EString)?
		('type' type=TypeHole)?
	'}';

enum TypeHole returns upctformaevalua::TypeHole:
				visible = 'visible' | hole = 'hole';

Assertion returns upctformaevalua::Assertion:
	{upctformaevalua::Assertion}
	(value?='value')?
	'Assertion'
	'{'
		('text' text=EString)?
	'}';

enum TypeGrade returns upctformaevalua::TypeGrade:
				highest = 'highest' | middle = 'middle' | lowest = 'lowest';
